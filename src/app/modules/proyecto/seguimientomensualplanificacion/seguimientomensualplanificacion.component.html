<div *ngIf="issloading == false">
  <mat-stepper mat-stepper orientation="vertical" [linear]="isLinear" #stepper>>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Datos de proyecto</ng-template>
        <mat-card class="example-card">
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-subtitle>ANEXO 9</mat-card-subtitle>
          <mat-card-title>INSTITUTO SUPERIOR TECNOLOGICO DEL AZUAY</mat-card-title>
          <mat-card-title>COORDINACIÓN DE VINCULACIÓN CON LA SOCIEDAD</mat-card-title>
          <mat-card-title>SEGUIMIENTO MENSUAL SEGÚN PLANIFICACIÓN</mat-card-title>
        </mat-card>
        <mat-card-content>
          <div id="contenedor">
            <div id="cabecera">
              <mat-form-field appearance="outline" style="width: 90%">
                <mat-label>BUSCAR...</mat-label>
                <input matInput placeholder="FILTRAR" [formControl]="myControl">
                <mat-icon matSuffix>search</mat-icon>
              </mat-form-field>
              <cdk-virtual-scroll-viewport appendOnly itemSize="40" class="example-viewport1">
                <mat-selection-list #shoes [multiple]="false" (selectionChange)="selectionAnexo7($event)"
                                    formControlName="anexo7">
                  <mat-list-option *ngFor="let option of filteredOptions | async" [value]="option" >
                    Proyecto: {{option.nombreProyecto}} : Mes Anexo 7: {{option.mesAnioPlanificado}}
                  </mat-list-option>
                </mat-selection-list>
              </cdk-virtual-scroll-viewport>
              <br>
              <p style="font-size: medium">
                Anexo 7 Seleccionado: {{anexo7.mesAnioPlanificado}}
              </p>
            </div>
          </div>
        </mat-card-content>
        <mat-divider></mat-divider>
        <br>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup" label="ACTIVIDADES SEGÚN PLANIFICACION">
      <form [formGroup]="secondFormGroup">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title> (ANEXO 9)<br><br> SEGUIMIENTO MENSUAL SEGÚN PLANIFICACIÓN</mat-card-title>
          <mat-card-subtitle><br/>
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br/>
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br/>
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-grid-list cols="3" rowHeight="6:1.10" [formGroup]="secondFormGroup">
            <div style="margin-top: 15px">
              <h3>ACTIVIDADES Y AVANCES</h3>
              <h3>Fecha seguimiento: {{fecha | date:'mediumDate'}}</h3>
              <br>
              <br>
              <div>
                <mat-grid-tile colspan="3" *ngFor="let row of secondFormGroup.get('rows')?.controls;let index = index;">
                  <!--Carga de lista de actividades-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>ACTIVIDADES</mat-label>
                    <input matInput type="text" [formControl]="row.get('actividadesPlanificacion')"
                           placeholder="Actividades" [required]>
                  </mat-form-field>
                  <!--Carga de lista de estudiantes-->
                  <mat-form-field style="width: 380px" appearance="outline">
                    <mat-label>ESTUDIANTE RESPONSABLE</mat-label>
                    <textarea matInput [formControl]="row.get('estudianteResponsable')"
                              placeholder="Estudiante responsable" [required]>
                    </textarea>
                  </mat-form-field>
                  <!--Carga de lista de fechas planificadas-->
                  <mat-form-field style="width: 180px" appearance="outline">
                    <mat-label>FECHA PLANIFICADA</mat-label>
                    <input matInput type="text" [formControl]="row.get('fechaPlanificacion')"
                           placeholder="Fecha Planificada" [required]>
                  </mat-form-field>
                  <mat-form-field appearance="outline" style="width: 180px">
                    <mat-label>FINALIZADA (SI/NO)</mat-label>
                    <mat-select [formControl]="row.get('finalizacion')" placeholder="FINALIZADA SI/NO">
                      <mat-option [value]="'SI'">SI</mat-option>
                      <mat-option [value]="'NO'">NO</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <!--Carga de lista de fechSas finalizar previas-->
                  <mat-form-field style="width: 180px" appearance="outline">
                    <mat-label>FECHA FINALIZACION PREVISTA</mat-label>
                    <input matInput type="text" [formControl]="row.get('fechaFinalizacion')"
                           placeholder="Fecha Planificada" [required]>
                  </mat-form-field>
                  <mat-form-field class="example-full-width" appearance="outline" style="width: 180px">
                    <mat-label>AVANCE DE ACTIVIDAD (%){{index}}</mat-label>
                    <input matInput type="number" min="0" max="100" [formControl]="row.get('numero')"
                           placeholder="Avance de la Actividad (%)" [required]>
                  </mat-form-field>
                  <span class="example-spacer"></span>
                </mat-grid-tile>
              </div>
            </div>
          </mat-grid-list>
          <br>
          <mat-label>OBSERVACIONES GENERALES</mat-label>
          <br>
          <mat-form-field appearance="fill" style="width: 100%; margin-left: 2px">
            <mat-label>Observaciones</mat-label>
            <textarea  id="obs" matInput [(ngModel)]="anexos9.observaciones" name="observaciones" [ngModelOptions]="{standalone: true}"></textarea>
          </mat-form-field>
         </mat-card-content>
        <div style="text-align: end">
          <button mat-fab matStepperPrevious color="warn" style="margin-right: 5px">
            <mat-icon>undo</mat-icon>
          </button>
          <button mat-fab matStepperNext color="primary">
            <mat-icon>queue_play_next</mat-icon>
          </button>

        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="thirdFormGroup" label="Documento">
      <form [formGroup]="thirdFormGroup">
        <mat-card class="example-card">
          <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>  (ANEXO 9)<br><br> SEGUIMIENTO MENSUAL SEGÚN PLANIFICACIÓN</mat-card-title>
            <mat-card-subtitle><br />
              PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br />
              INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br />
            </mat-card-subtitle>
          </mat-card-header>
          <h4>Debe obetner el anexo en "Obtener Anexo" y posteriormente debera firmar y subir de en formato PDF</h4>
          <div>
            <button mat-raised-button color="primary" (click)="generarDocumento9()">Obtener Anexo</button>
            <mat-form-field appearance="outline" style="width: 75%; margin-left: 10px" >

              <ngx-mat-file-input accept="application/pdf"  (change)="subirDocumento9($event.target.files)"  formControlName="docx" placeholder="Subir Documento"></ngx-mat-file-input>

              <mat-icon matSuffix>folder</mat-icon>
            </mat-form-field>
          </div>
          <mat-card-content>
            <div>
              <button mat-button matStepperPrevious color="primary">Atras</button>
              <button mat-button matStepperNext color="warn">Siguente</button>
            </div>
          </mat-card-content>
        </mat-card>
      </form>
    </mat-step>
    <mat-step  label="Confirmar">
      <mat-card class="example-card">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>  (ANEXO 9)<br><br> SEGUIMIENTO MENSUAL SEGÚN PLANIFICACIÓN</mat-card-title>
          <mat-card-subtitle><br />
            PROYECTOS DE VINCULACIÓN CON LA SOCIEDAD <br />
            INSTITUTO SUPERIOR TECNOLÓGICO DEL AZUAY <br />
          </mat-card-subtitle>
          <mat-card-subtitle>GUARDAR SEGUIMIENTO MENSUAL SEGÚN PLANIFICACIÓN </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>

          <div>
            <button mat-button matStepperPrevious color="primary">Atras</button>
            <button mat-flat-button color="warn" (click)="guardarAnexo9()">GUARDAR</button>
          </div>
        </mat-card-content>
      </mat-card>
    </mat-step>

  </mat-stepper>

</div>
<div *ngIf="isexist==false">
  <mat-card>
    <mat-card-title>NO EXISTE</mat-card-title>
  </mat-card>
</div>
<ng-container *ngIf="issloading">
  <div class="bss-loader" style="margin: auto;">
    <center>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </center>
  </div>
</ng-container>
